var bt=Object.defineProperty,ft=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var U=(m,r,i)=>r in m?bt(m,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[r]=i,W=(m,r)=>{for(var i in r||(r={}))_t.call(r,i)&&U(m,i,r[i]);if(O)for(var i of O(r))yt.call(r,i)&&U(m,i,r[i]);return m},J=(m,r)=>ft(m,mt(r));var I=(m,r,i)=>new Promise(($,T)=>{var y=_=>{try{h(i.next(_))}catch(S){T(S)}},B=_=>{try{h(i.throw(_))}catch(S){T(S)}},h=_=>_.done?$(_.value):Promise.resolve(_.value).then(y,B);h((i=i.apply(m,r)).next())});import{d as gt,u as ht,a as A,r as R,y as Z,E as kt,Z as xt,_ as vt,e as Ct,f as wt,o as p,g as c,k as o,w as a,j as s,h as n,i as l,t as u,C as X,$ as jt,F as M,q as Q,s as Nt}from"./index.27a20cdf.js";import{_ as St,u as Pt}from"./table.b14e82ad.js";import"./index.65159add.js";import"./el-input.172ae120.js";/* empty css                  */import{_ as Tt}from"./index.5a6dfef3.js";import{u as It}from"./saveScrollPosition.7fb4c1aa.js";import{g as At,u as Rt,a as $t,b as Bt}from"./loading.150065e6.js";import{a as Y,d as tt}from"./index.eddab6a4.js";import{_ as Dt}from"./plugin-vue_export-helper.db4a78ed.js";import{s as Mt}from"./search.9b6f4499.js";import{r as Qt}from"./refresh.14f62c5c.js";const Vt={class:"projects-runs-page px-10 mx-auto md:w-screen-md lg:w-screen-lg xl:w-screen-xl"},Et={class:"content"},Ft={class:"info mt-20px !py-30px"},Lt={class:"text-red-800 font-bold italic"},zt={class:"text-red-800 font-bold italic"},Ht=["id"],qt={style:{padding:"2%","background-color":"#faf5ff"},class:"my-8"},Gt={class:"search-wrapper"},Kt={style:{"list-style-type":"disc","margin-left":"3px","padding-left":"5px"}},Ot={style:{display:"-webkit-box","text-overflow":"ellipsis",overflow:"hidden","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"}},Ut={key:0,style:{"list-style-type":"disc","margin-left":"3px","padding-left":"5px"}},Wt={key:0,style:{"list-style-type":"disc","margin-left":"3px","padding-left":"5px"}},Jt={key:1},Zt=["id"],Xt={style:{padding:"2%","background-color":"#faf5ff"},class:"my-8"},Yt={key:0},te={key:1},ee={key:0},ae={key:1},oe={key:0},ne={key:1},le={name:"Data"},se=gt(J(W({},le),{setup(m){const r=ht(),{path:i}=r.currentRoute.value,$=d=>{d.preventDefault()},T=A(0);It(T);const y=R({data:[],total:0,page:1,limit:10,keywords:"",except:!1,totalData:[]}),B=[{label:"Project ID",slotName:"pid",prop:"project_id",width:"200",sortable:"custom",sortOrders:["descending","ascending"]},{label:"Assay Type",slotName:"assayType",prop:"assay_type",width:"120",sortable:!1},{label:"Nr. Processed Runs (Total Runs)",slotName:"runs",prop:"processed_runs",width:"160",sortable:!1},{label:"Related Phenotype(s)",slotName:"phenotypes",prop:"related_phenotypes",width:"360"},{label:"Publication",slotName:"publication",prop:"public_accession"}],h=R({}),_=A([]),S=A([]),V=R({}),{handleSortChange:et,changePage:at,getTableData:ie,searchTable:D,refreshSearch:ot}=Pt(_,y);At(_,S,h,V,D);const k=d=>{window.open(d)},nt=d=>{d.indexOf("/")!==-1?k(`https://doi.org/${d}`):k(`https://www.ncbi.nlm.nih.gov/pubmed/?term=${d}`)},{loading:lt,toggle:E}=Rt(),x=R({data:[],total:1600,page:1,limit:10}),st=[{label:"Project ID",slotName:"pid",prop:"project_id",width:"200",fixed:"left"},{label:"Run ID",slotName:"rid",prop:"run_id",width:"180",fixed:"left"},{label:"Phenotype",slotName:"phenotype",prop:"phenotype_name",width:"260"},{label:"Country",prop:"country"},{label:"Age",slotName:"age",prop:"age"},{label:"Sex",slotName:"sex",prop:"sex"},{label:"BMI",slotName:"bmi",prop:"bmi"},{label:"QC State",prop:"QC_state"}],it=d=>{x.page=d.currentPage,x.limit=d.pageSize,F()},F=()=>{E(),$t({limit:x.limit,skip:(x.page-1)*x.limit}).then(d=>{x.data=d,E()})};F();const dt=({row:d,column:t,rowIndex:v,columnIndex:C})=>{if(C===7){if(d.QC_state==="1")return{"background-color":"#CCFFCC"};if(d.QC_state==="0")return{"background-color":"#fff0f0"}}else return{"background-color":"#faf5ff"}},rt=()=>I(this,null,function*(){const d=_.value;let t=`${["Project ID","Assay type","Project title","Project description","Public accession","Journal","Total runs","Processed runs","Related phenotypes","Related phenotype IDs"].join("	")}
`;d.forEach(g=>{const f=[];for(const w in g)f.push(g[w]);t+=f.join("	")+`
`});const v=new Blob([t],{type:"text/plain;charset=utf-8"}),C="all_projects_"+Date.now().toString()+".txt";Y(v,C)}),L=A([]);function pt(){return I(this,null,function*(){L.value=yield Bt()})}const ct=()=>I(this,null,function*(){yield pt();const d=L.value;let t=`${["Project ID","Run ID","Sample Name","Assay Type","Sequencing Method","Phenotype Name","Sample Description","Phenotype ID","Country","Geographic Location","Longitude","Lattitude","Age","Sex","BMI","antibiotic_use","antibiotic_name","bodysite","batch","batch2","QC_Bacteria","QC_Fungi","QC_state"].join("	")}
`;d.forEach(g=>{const f=[];for(const w in g)w!="id"&&w!="QC_Bacteria_gg"&&f.push(g[w]);t+=f.join("	")+`
`});const v=new Blob([t],{type:"text/plain;charset=utf-8"}),C="all_runs_"+Date.now().toString()+".txt";Y(v,C)});return(d,t)=>{var H,q,G,K;const v=Z("a-anchor-link"),C=Z("a-anchor"),g=kt,f=Tt,w=xt,ut=vt,j=Ct,N=wt,z=St;return p(),c("div",Vt,[o(C,{class:"catalogue",onClick:$,"target-offset":80},{default:a(()=>[o(v,{href:"#"+s(i)+"#projects",title:"Projects"},null,8,["href"]),o(v,{href:"#"+s(i)+"#runs",title:"Runs"},null,8,["href"])]),_:1}),n("div",Et,[t[20]||(t[20]=n("h1",null,"Projects and runs",-1)),n("dl",Ft,[t[6]||(t[6]=n("dt",{class:"font-bold"},"Data summary:",-1)),n("dd",null,[t[2]||(t[2]=n("span",{class:"font-bold"},"Meta data",-1)),t[3]||(t[3]=l(" for in total ")),n("span",Lt,u((H=s(V).projects_number)==null?void 0:H.toLocaleString()),1),t[4]||(t[4]=l(" projects, containing ")),n("span",zt,u((G=(q=s(h))==null?void 0:q.runs_number)==null?void 0:G.toLocaleString()),1),t[5]||(t[5]=X(' runs (samples) are available in HGMT. These runs (samples) including: <dl data-v-59dbb4ea><dd data-v-59dbb4ea><span class="text-red-800 font-bold italic" data-v-59dbb4ea>7,205</span> that are <span class="font-bold" data-v-59dbb4ea>WGS</span></dd><dd data-v-59dbb4ea><span class="text-red-800 font-bold italic" data-v-59dbb4ea>11,356</span> that are <span class="font-bold" data-v-59dbb4ea>16S</span></dd><dd data-v-59dbb4ea><span class="text-red-800 font-bold italic" data-v-59dbb4ea>69</span> that are <span class="font-bold" data-v-59dbb4ea>ITS</span></dd></dl>',2))]),t[7]||(t[7]=n("dd",null,[l(" Among which, microbe abundance data are available for in total "),n("span",{class:"text-red-800 font-bold italic"},"17,391"),l(" runs, belonging to "),n("span",{class:"text-red-800 font-bold italic"},"103"),l(" projects. ")],-1)),t[8]||(t[8]=n("dd",null,[l(" In total "),n("span",{class:"text-red-800 font-bold italic"},"1,239"),l(" runs, belonging to "),n("span",{class:"text-red-800 font-bold italic"},"27"),l(" projects failed our QC processes. ")],-1))]),n("h2",{id:`${s(i)}#projects`},"Projects",8,Ht),t[21]||(t[21]=n("hr",null,null,-1)),n("p",null,[t[10]||(t[10]=l("Metadata are available for total 111 projects; ")),o(f,{"is-external":"","show-icon":!1,onClick:rt},{default:a(()=>[t[9]||(t[9]=l("click here to download all projects as tsv ")),o(g,{style:{"vertical-align":"text-bottom"}},{default:a(()=>[o(s(tt))]),_:1})]),_:1})]),n("div",qt,[n("div",Gt,[o(w,{modelValue:s(y).except,"onUpdate:modelValue":t[0]||(t[0]=e=>s(y).except=e),label:"Except for...",class:"pl-10px !mr-10px"},null,8,["modelValue"]),o(ut,{placeholder:"Search term",modelValue:s(y).keywords,"onUpdate:modelValue":t[1]||(t[1]=e=>s(y).keywords=e),onKeydown:jt(s(D),["enter"])},null,8,["modelValue","onKeydown"]),o(j,{type:"primary",icon:s(Mt),class:"ml-10px",onClick:s(D)},{default:a(()=>t[11]||(t[11]=[l("Search")])),_:1},8,["icon","onClick"]),o(j,{icon:s(Qt),round:"",onClick:s(ot)},null,8,["icon","onClick"])]),o(z,{onPaginationChange:s(at),"table-data":s(y).data,"table-head":B,total:s(y).total,"default-sort":{prop:"valid_runs",order:"descending"},onSortChange:s(et)},{pid:a(({row:e})=>[o(f,{to:`/data/${e.project_id}`},{default:a(()=>[l(u(e.project_id),1)]),_:2},1032,["to"]),o(N,{content:"click to view it in NCBI BioProject",effect:"dark",placement:"top"},{default:a(()=>[o(j,{type:"primary",size:"small",style:{float:"right"},onClick:b=>k("https://www.ncbi.nlm.nih.gov/bioproject/"+e.project_id)},{default:a(()=>t[12]||(t[12]=[l(" NCBI\xA0 "),n("i",{class:"iconfont icon-share white"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)]),assayType:a(({row:e})=>{var b;return[n("ul",Kt,[(p(!0),c(M,null,Q((b=e.assay_type)==null?void 0:b.split(";"),P=>(p(),c("li",{key:P,style:{display:"list-item"}},u(P),1))),128))])]}),title:a(({row:e})=>[o(N,{content:e.project_title,placement:"top"},{default:a(()=>[n("p",Ot,u(e.project_title),1)]),_:2},1032,["content"])]),runs:a(({row:e})=>[l(u(e.processed_runs)+" ("+u(e.total_runs)+") ",1)]),phenotypes:a(({row:e})=>[e.related_phenotypes!=="NA"?(p(),c("ul",Ut,[(p(!0),c(M,null,Q(e.related_phenotype_ids.toString().split(";"),(b,P)=>(p(),c("li",{style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"3px"},key:b},[o(f,{to:`/explore/${b}`},{default:a(()=>[l(u(e.related_phenotypes.toString().split(";")[P]),1)]),_:2},1032,["to"]),o(N,{content:"click to view it in Mesh",effect:"dark",placement:"top"},{default:a(()=>[o(j,{type:"primary",size:"small",onClick:de=>k("https://meshb.nlm.nih.gov/record/ui?ui="+b)},{default:a(()=>t[13]||(t[13]=[l(" MeSH\xA0 "),n("i",{class:"iconfont icon-share white"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)]))),128))])):Nt("",!0)]),publication:a(({row:e})=>[e.public_accession!=="NA"?(p(),c("ul",Wt,[(p(!0),c(M,null,Q(e.public_accession.toString().split(","),b=>(p(),c("li",{style:{display:"list-item"},key:b},[o(f,{to:"_blank","is-external":"","show-icon":!1,onClick:P=>nt(b)},{default:a(()=>[l(u(b)+" ",1),t[14]||(t[14]=n("i",{class:"iconfont icon-share"},null,-1))]),_:2},1032,["onClick"])]))),128))])):(p(),c("span",Jt,"NA"))]),_:1},8,["onPaginationChange","table-data","total","onSortChange"])]),n("h2",{id:`${s(i)}#runs`},"Runs",8,Zt),t[22]||(t[22]=n("hr",null,null,-1)),n("p",null,[t[16]||(t[16]=l(" Meta data are available for total 16,195 runs; ")),o(f,{"is-external":"","show-icon":!1,onClick:ct},{default:a(()=>[t[15]||(t[15]=l("click here to download all runs as tsv ")),o(g,{style:{"vertical-align":"text-bottom"}},{default:a(()=>[o(s(tt))]),_:1})]),_:1})]),t[23]||(t[23]=X('<p data-v-59dbb4ea><dl class="info" data-v-59dbb4ea><dt class="font-bold" data-v-59dbb4ea>Note:</dt><dd data-v-59dbb4ea><span class="font-bold" data-v-59dbb4ea>QC_Status:</span><dl data-v-59dbb4ea><dd data-v-59dbb4ea><span style="background-color:#CCFFCC;" data-v-59dbb4ea>1</span>: QC ok and data loaded in our database,</dd><dd data-v-59dbb4ea><span style="background-color:#fff0f0;" data-v-59dbb4ea>0</span>: QC <span style="color:#c7254e;background-color:#f9f2f4;border-color:#c7254e;" data-v-59dbb4ea>NOT</span> ok and data not loaded in our database</dd></dl></dd></dl></p>',1)),n("div",Xt,[o(z,{"table-data":s(x).data,total:(K=s(h))==null?void 0:K.runs_number,"table-head":st,loading:s(lt),onPaginationChange:it,"cell-style":dt},{pid:a(({row:e})=>[o(f,{to:`/data/${e.project_id}`},{default:a(()=>[l(u(e.project_id),1)]),_:2},1032,["to"]),o(N,{content:"click to view it in NCBI BioProject",effect:"dark",placement:"top"},{default:a(()=>[o(j,{type:"primary",size:"small",style:{float:"right"},onClick:b=>k("https://www.ncbi.nlm.nih.gov/bioproject/"+e.project_id)},{default:a(()=>t[17]||(t[17]=[l(" NCBI\xA0 "),n("i",{class:"iconfont icon-share white"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)]),rid:a(({row:e})=>[l(u(e.run_id)+" ",1),o(N,{content:"click to view it in NCBI SRA(Sequence Read Archive)",effect:"dark",placement:"top"},{default:a(()=>[o(j,{type:"primary",size:"small",style:{float:"right"},onClick:b=>k("https://www.ncbi.nlm.nih.gov/Traces/sra?run="+e.run_id)},{default:a(()=>t[18]||(t[18]=[l(" NCBI\xA0 "),n("i",{class:"iconfont icon-share white"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)]),phenotype:a(({row:e})=>[o(f,{to:`/explore/${e.phenotype_id}`},{default:a(()=>[l(u(e.phenotype_name),1)]),_:2},1032,["to"]),o(N,{content:"click to view it in Mesh",effect:"dark",placement:"top"},{default:a(()=>[o(j,{type:"primary",size:"small",style:{float:"right"},onClick:b=>k("https://meshb.nlm.nih.gov/record/ui?ui="+e.phenotype_id)},{default:a(()=>t[19]||(t[19]=[l(" MeSH\xA0 "),n("i",{class:"iconfont icon-share white"},null,-1)])),_:2},1032,["onClick"])]),_:2},1024)]),age:a(({row:e})=>[e.age?(p(),c("span",Yt,u(e.age),1)):(p(),c("span",te,"NA"))]),sex:a(({row:e})=>[e.sex?(p(),c("span",ee,u(e.sex),1)):(p(),c("span",ae,"NA"))]),bmi:a(({row:e})=>[e.bmi?(p(),c("span",oe,u(Number(e.bmi).toFixed(2)),1)):(p(),c("span",ne,"NA"))]),_:1},8,["table-data","total","loading"])])])])}}}));var ve=Dt(se,[["__scopeId","data-v-59dbb4ea"]]);export{ve as default};
