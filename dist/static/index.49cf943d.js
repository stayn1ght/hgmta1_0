var Z=Object.defineProperty,tt=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var F=(s,a,o)=>a in s?Z(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o,G=(s,a)=>{for(var o in a||(a={}))at.call(a,o)&&F(s,o,a[o]);if(V)for(var o of V(a))st.call(a,o)&&F(s,o,a[o]);return s},W=(s,a)=>tt(s,et(a));var q=(s,a,o)=>new Promise((x,f)=>{var h=u=>{try{g(o.next(u))}catch(j){f(j)}},k=u=>{try{g(o.throw(u))}catch(j){f(j)}},g=u=>u.done?x(u.value):Promise.resolve(u.value).then(h,k);g((o=o.apply(s,a)).next())});import{_ as ot,u as nt}from"./table.92547ed7.js";import{_ as lt}from"./index.28069054.js";/* empty css             *//* empty css                  *//* empty css                  */import"./plugin-vue_export-helper.21578988.js";import{u as it}from"./saveScrollPosition.4bd216e5.js";import{p as Y}from"./index.ac9db919.js";import{r as A,d as ct,a as T,E as dt,b as rt,c as pt,o as i,e as c,f as l,g as d,t as p,u as _,h as n,w as e,F as B,i as R,j as _t,p as ut,k as mt}from"./index.cc3e9507.js";import{_ as ft}from"./plugin-vue_export-helper.db4a78ed.js";import{s as P}from"./share.4967a23f.js";const ht=(s,a,o,x,f)=>q(void 0,null,function*(){var k;const h=yield Y({url:"/getProjectsandRuns/"});s.value=(k=h.projects)==null?void 0:k.sort((g,u)=>u.valid_runs-g.valid_runs),a.value=h.allrunsbyexperimenttype,Object.assign(o,h.run_stats),Object.assign(x,h.projects_number),f()}),gt=s=>Y({url:"/getAllRunsAsync/",data:s});function bt(s=!1){const a=A(s);return{loading:a,setLoading:f=>{a.value=f},toggle:()=>{a.value=!a.value}}}const v=s=>(ut("data-v-f7fd5088"),s=s(),mt(),s),yt={class:"projects-runs-page px-10 mx-auto md:w-screen-md lg:w-screen-lg xl:w-screen-xl"},vt=v(()=>l("h1",null,"Projects and runs",-1)),xt={class:"info mt-20px !py-30px"},kt=v(()=>l("dt",{class:"font-bold"},"Data summary:",-1)),jt=v(()=>l("span",{class:"font-bold"},"Meta data",-1)),Nt={class:"text-red-800 font-bold italic"},wt={class:"text-red-800 font-bold italic"},Ct=_t('<dd data-v-f7fd5088><span class="text-red-800 font-bold italic" data-v-f7fd5088>5647 </span> that are <span class="font-bold" data-v-f7fd5088>WGS</span></dd><dd data-v-f7fd5088><span class="text-red-800 font-bold italic" data-v-f7fd5088> 10479 </span> that are <span class="font-bold" data-v-f7fd5088>16S</span></dd><dd data-v-f7fd5088><span class="text-red-800 font-bold italic" data-v-f7fd5088> 69 </span> that are <span class="font-bold" data-v-f7fd5088>ITS</span></dd>',3),St=v(()=>l("h2",null,"Projects",-1)),Tt={style:{"margin-left":"3%","margin-right":"3%",padding:"2%","background-color":"#faf5ff"}},Pt={style:{"list-style-type":"disc","margin-left":"3px"}},At=v(()=>l("i",{class:"iconfont icon-share"},null,-1)),It={key:0,style:{"list-style-type":"disc","margin-left":"3px"}},Bt=v(()=>l("i",{class:"iconfont icon-share"},null,-1)),Rt={key:1},Dt={style:{"list-style-type":"disc","margin-left":"3px"}},$t={style:{display:"-webkit-box","text-overflow":"ellipsis",overflow:"hidden","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"}},Lt=v(()=>l("h2",null,"Runs",-1)),zt={style:{"margin-left":"3%","margin-right":"3%","margin-bottom":"5%",padding:"2%","background-color":"#faf5ff"}},Et={key:0},Mt={key:1},Ht={key:0},Ot={key:1},Vt={key:0},Ft={key:1},Gt={name:"Data"},Wt=ct(W(G({},Gt),{setup(s){const a=A(0);it(a);const o=T({data:[],total:0,page:1,limit:10,keywords:"",except:!1,totalData:[]}),x=[{label:"Project ID",slotName:"pid",prop:"project_id",width:"200",sortable:"custom",sortOrders:["descending","ascending"]},{label:"Assay Type",slotName:"assayType",prop:"assay_type",width:"150",sortable:!1},{label:"Project Title",slotName:"title",prop:"project_title"},{label:"Publication",slotName:"publication",prop:"public_accession"}],f=T({}),h=A([]),k=A([]),g=T({}),{handleSortChange:u,changePage:j,getTableData:qt,searchTable:J}=nt(h,o);ht(h,k,f,g,J);const K=({row:m,columnIndex:L})=>{if(L===5){if(m.has_it_been_collected==="Y")return"bg-green-100/30";if(m.has_it_been_collected==="N")return"bg-red-100/30"}return""},w=m=>{window.open(m)},{loading:Q,toggle:D}=bt(),b=T({data:[],total:1600,page:1,limit:10}),U=[{label:"Project ID",slotName:"pid",prop:"project_id",width:"220"},{label:"Run ID",slotName:"rid",prop:"run_id",width:"220",sortOrders:["descending","ascending"]},{label:"Phenotype",slotName:"phenotype",prop:"phenotype_name",width:"260"},{label:"age",slotName:"age",prop:"age"},{label:"sex",slotName:"sex",prop:"sex"},{label:"bmi",slotName:"bmi",prop:"bmi"}],X=m=>{b.page=m.currentPage,b.limit=m.pageSize,$()},$=()=>{D(),gt({limit:b.limit,skip:(b.page-1)*b.limit}).then(m=>{b.data=m,D()})};return $(),(m,L)=>{var E,M,H,O;const C=dt,S=rt,N=pt,I=lt,z=ot;return i(),c("div",yt,[vt,l("dl",xt,[kt,l("dd",null,[l("dl",null,[l("dt",null,[jt,d(" for in total "),l("span",Nt,p((E=_(g).projects_number)==null?void 0:E.toLocaleString()),1),d(" projects, containing "),l("span",wt,p((H=(M=_(f))==null?void 0:M.runs_number)==null?void 0:H.toLocaleString()),1),d(" runs (samples) are available in HGMT. These runs (samples) including ")]),Ct])])]),St,l("div",Tt,[n(z,{onPaginationChange:_(j),"table-data":_(o).data,"table-head":x,total:_(o).total,"default-sort":{prop:"valid_runs",order:"descending"},onSortChange:_(u),"cell-class-name":K},{pid:e(({row:t})=>[d(p(t.project_id)+" ",1),n(N,{content:"click to view it in NCBI BioProject",effect:"dark",placement:"top"},{default:e(()=>[n(S,{type:"primary",size:"small",style:{float:"right"},onClick:r=>w("https://www.ncbi.nlm.nih.gov/bioproject/"+t.project_id)},{default:e(()=>[d(" NCBI\xA0 "),n(C,null,{default:e(()=>[n(_(P))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),phenotypes:e(({row:t})=>{var r;return[l("ul",Pt,[(i(!0),c(B,null,R((r=t.diseases)==null?void 0:r.split(","),y=>(i(),c("li",{key:y,style:{display:"list-item"}},[n(I,{to:`/phenotypes/${y}`},{default:e(()=>[d(p(m.disease2term[y]),1)]),_:2},1032,["to"]),d("\xA0 "),n(I,{to:`https://meshb.nlm.nih.gov/record/ui?ui=${y}`,"is-external":"","show-icon":!1},{default:e(()=>[At]),_:2},1032,["to"])]))),128))])]}),publication:e(({row:t})=>[t.public_accession!=="NA"?(i(),c("ul",It,[(i(!0),c(B,null,R(t.public_accession.toString().split(","),r=>(i(),c("li",{style:{display:"list-item"},key:r},[n(I,{to:`https://pubmed.ncbi.nlm.nih.gov/${r}/`,"is-external":"","show-icon":!1},{default:e(()=>[d(p(r)+" ",1),Bt]),_:2},1032,["to"])]))),128))])):(i(),c("span",Rt,"NA"))]),assayType:e(({row:t})=>{var r;return[l("ul",Dt,[(i(!0),c(B,null,R((r=t.assay_type)==null?void 0:r.split(";"),y=>(i(),c("li",{key:y,style:{display:"list-item"}},p(y),1))),128))])]}),title:e(({row:t})=>[n(N,{content:t.project_title,placement:"top"},{default:e(()=>[l("p",$t,p(t.project_title),1)]),_:2},1032,["content"])]),_:1},8,["onPaginationChange","table-data","total","onSortChange"])]),Lt,l("div",zt,[n(z,{"table-data":_(b).data,total:(O=_(f))==null?void 0:O.runs_number,"table-head":U,loading:_(Q),onPaginationChange:X},{pid:e(({row:t})=>[d(p(t.project_id)+" ",1),n(N,{content:"click to view it in NCBI BioProject",effect:"dark",placement:"top"},{default:e(()=>[n(S,{type:"primary",size:"small",style:{float:"right"},onClick:r=>w("https://www.ncbi.nlm.nih.gov/bioproject/"+t.project_id)},{default:e(()=>[d(" NCBI\xA0 "),n(C,null,{default:e(()=>[n(_(P))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),rid:e(({row:t})=>[d(p(t.run_id)+" ",1),n(N,{content:"click to view it in NCBI SRA(Sequence Read Archive)",effect:"dark",placement:"top"},{default:e(()=>[n(S,{type:"primary",size:"small",style:{float:"right"},onClick:r=>w("https://www.ncbi.nlm.nih.gov/Traces/sra?run="+t.run_id)},{default:e(()=>[d(" NCBI\xA0 "),n(C,null,{default:e(()=>[n(_(P))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),phenotype:e(({row:t})=>[d(p(t.phenotype_name)+" ",1),n(N,{content:"click to view it in Mesh",effect:"dark",placement:"top"},{default:e(()=>[n(S,{type:"primary",size:"small",style:{float:"right"},onClick:r=>w("https://meshb.nlm.nih.gov/record/ui?ui="+t.phenotype_id)},{default:e(()=>[d(" MeSH\xA0 "),n(C,null,{default:e(()=>[n(_(P))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),age:e(({row:t})=>[t.age?(i(),c("span",Et,p(t.age),1)):(i(),c("span",Mt,"NA"))]),sex:e(({row:t})=>[t.sex?(i(),c("span",Ht,p(t.sex),1)):(i(),c("span",Ot,"NA"))]),bmi:e(({row:t})=>[t.bmi?(i(),c("span",Vt,p(t.bmi),1)):(i(),c("span",Ft,"NA"))]),_:1},8,["table-data","total","loading"])])])}}}));var ne=ft(Wt,[["__scopeId","data-v-f7fd5088"]]);export{ne as default};
